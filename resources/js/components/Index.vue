<template>
    <div>
        <router-link :to="{name:'fruit.index'}"> List </router-link>
        <router-link v-if="!accessToken" :to="{name:'user.login'}"> Login </router-link>
        <router-link v-if="!accessToken" :to="{name:'user.registration'}"> Registration </router-link>
        <router-link v-if="accessToken" :to="{name:'user.personal'}"> Personal </router-link>
        <router-view></router-view>
    </div>
</template>

<script>
    export default {
        name: "Index",
        data(){
            return{
                accessToken: null
            }
        },
        //подтягивает токен при загрузке приложения
        mounted() {
            this.getAccessToken()
        },
        //подтягивает токен при изменении и перезагрузке приложения
        updated() {
            this.getAccessToken()
        },
        methods:{
            getAccessToken(){
                this.accessToken = localStorage.getItem('access_token');
            }
        }

    }
</script>
